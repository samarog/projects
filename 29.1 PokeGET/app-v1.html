<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PokeGET v1</title>
  <style>

  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

body {
  /* Gradient Background */
  background: linear-gradient(135deg, #00b4d8 0%, #0077b6 50%, #03045e 100%);
  color: #ffcd05bd;
  font-family: 'Press Start 2P', sans-serif;
  margin: 0;
  padding: 0;
  position: relative;
  min-height: 90dvh;
  overflow-x: hidden;
}

/* Background image overlay */
body::before {
  content: "";
  position: absolute;
  top: 20%;
  right: 0;
  bottom: 0;
  left: 0;
  background: var(--poke-bg) no-repeat bottom right; /* dynamic variable */
  background-size: 300px;
  opacity: 0.18;
  pointer-events: none;
  z-index: 0;
  margin-bottom: 25px;
  margin-right: 10px;
}

.background-pokemon {
  position: absolute;
  top: 10%;
  left: 15%;
  transform: translate(-50%, -50%);
  max-width: 100vw;
  max-height: 100vh;
  opacity: 0.05;
  pointer-events: none;
  z-index: 0;
  filter: grayscale(100%);
}

.pokemon-button {
  font-family: 'Press Start 2P', cursive;
  font-size: 14px;
  color: rgb(40, 67, 189);
  background-color: #ffcb05;
  border: 4px solid #3b4cca;
  padding: 12px 20px;
  border-radius: 8px;
  box-shadow: 0 5px 0 #2a2a2a;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  z-index: 1;
}

.pokemon-button:hover {
  background-color: #f5b700;
  box-shadow: 0 2px 0 #2a2a2a;
  transform: translateY(3px);
}

.pokemon-button:active {
  background-color: #e6a700;
  box-shadow: none;
  transform: translateY(5px);
}

#pokemon-display {
  color: #f5b700;
  text-shadow: 2px 2px 0 #212121, 4px 4px 8px rgba(0, 0, 0, 0.6);
  box-shadow: 0 0 20px 4px rgba(245, 183, 0, 0.3);
  transition: opacity 0.3s ease;
  opacity: 1;
  padding: 20px;
  margin-top: 20px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.2);
}

#pokemon-display .gameboy-table,
#pokemon-display .gameboy-table2 {
  color: #212121;
  text-shadow: none;
  box-shadow: none;
  background-color: transparent;
}

#pokemon-display .gameboy-table th,
#pokemon-display .gameboy-table td,
#pokemon-display .gameboy-table2 th,
#pokemon-display .gameboy-table2 td {
  text-shadow: none;
  background-color: inherit;
}


#search-input {
  padding: 18px;
  font-family: 'Press Start 2P', cursive;
  font-size: 12px;
  width: 250px;
  text-align: center;
  border: 2px solid #3b4cca;
  border-radius: 6px;
  background-color: #fff;
  color: #000;
}

.hero {
  display: flex;
  flex-direction: column;       /* Stack logo and button vertically */
  align-items: center;          /* Center horizontally */
  justify-content: center;      /* Center vertically */
  min-height: 100vh;            /* Full height to allow vertical centering */
  text-align: center;
  gap: 20px;                    /* Space between logo and button */
  padding-top: 2%;
}

.gameboy-table {
  font-family: 'Press Start 2P', cursive;
  font-size: 8px;
  color: #212121;
  background-color: #a4ffaf;
  border-collapse: collapse;
  width: 100%;
  max-width: 300px;
  max-height: 100px;
  margin-top: 10px;
  box-shadow: 0 0 0 4px #212121;
}

.gameboy-table th,
.gameboy-table td {
  border: 2px solid #212121;
  padding: 6px 8px;
  text-align: left;
}

.gameboy-table thead {
  background-color: #70e000;
  color: #000;
}

.gameboy-table tbody tr:nth-child(odd) {
  background-color: #caffbf;
}

.gameboy-table tbody tr:nth-child(even) {
  background-color: #b5f2a2;
}

.gameboy-table2 {
  font-family: 'Press Start 2P', cursive;
  font-size: 8px;
  color: #212121;
  background-color: #fff4b3; 
  border-collapse: collapse;
  width: 100%;
  max-width: 300px;
  margin-top: 10px;
  box-shadow: 0 0 0 4px #212121;
}

.gameboy-table2 th,
.gameboy-table2 td {
  border: 2px solid #212121;
  padding: 6px 8px;
  text-align: left;
}

.gameboy-table2 thead {
  background-color: #ffe066; 
  color: #000;
}

.gameboy-table2 tbody tr:nth-child(odd) {
  background-color: #fff1a3; 
}

.gameboy-table2 tbody tr:nth-child(even) {
  background-color: #ffe799; 
}

.lists {
  display: flex;
  flex-direction: row;
  align-content: center;
  justify-content: center;
  gap: 10px;
}

.container, footer {
  position: relative;
  z-index: 1;
  text-align: right;
  text-shadow: #000;
  font-size: .8rem
}

footer {
  right: 2%;
  margin-bottom: 2%
}

  </style>
</head>
<body id="pokebg">

  <div class="hero">
    <img src="https://www.transparentpng.com/download/pokemon-go/2mdYaH-pokemon-go-logo-hd-image.png" />
    <div class="search-controls">
      <input id="search-input" type="text" placeholder="Enter Pok√©mon or Type"/>
      <button class="pokemon-button" id="pokemon-catch">Catch!</button>
      <button class="pokemon-button" style='display: none' id="pokemon-random">Catch!</button>
      <div style="visibility: hidden;" id="pokemon-display"></div>
  </div>
  </div>
    <img id="background-pokemon" class="background-pokemon" src="" alt="Background Pok√©mon" />
    </div>

  <footer>App by samarog | 2025</footer>

  <script>

      // dynamic background using variables
    window.onload = () => {
      const randomId = Math.floor(Math.random() * maxPokemon)
      const backgroundURL = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${randomId}.png`;

      document.body.style.setProperty('--poke-bg', `url(${backgroundURL})`);
    }
    
  const maxPokemon = 898;
  const btn = document.getElementById("pokemon-random");
  const display = document.getElementById("pokemon-display");

  // RANDOM
btn.addEventListener("click", () => {
  const randomId = Math.floor(Math.random() * maxPokemon) + 1;
  const url = `https://pokeapi.co/api/v2/pokemon/${randomId}`;

display.style = "visibility: visible;"
display.innerHTML = `<p style="font-size: 0.8rem;">Loading Pok√©mon...</p>`

  fetch(url)
    .then(response => response.json())
    .then(data => {
      console.log(data);
      showPokemon(data);
      })
    .catch(error => {
      console.error(error);
      display.innerHTML = 'Failed to load Pok√©mon üò¢';
    });
});

// CATCH
  const searchBtn = document.getElementById("pokemon-catch");
  const searchInput = document.getElementById("search-input");

searchBtn.addEventListener("click", () => {
const query = searchInput.value.trim().toLowerCase();

  if (!query) {
    display.style.visibility = "visible";
    display.innerHTML = 'Please enter a Pok√©mon!';
    return;
  }

  display.style.visibility = "visible";
  display.innerHTML = `<p style="font-size: 0.8rem;">Loading Pok√©mon...</p>`;

  const urlByName = `https://pokeapi.co/api/v2/pokemon/${query}`;
  const urlByType = `https://pokeapi.co/api/v2/type/${query}`;

  fetch(urlByName)
    .then(res => {
      if (!res.ok) throw new Error("Not a Pok√©mon name");
      return res.json();
    })
    .then(data => {
      showPokemon(data); // function you already use for display
    })
    .catch(() => {
      // Not a Pok√©mon? Try type instead
      fetch(urlByType)
        .then(res => {
          if (!res.ok) throw new Error("Invalid type");
          return res.json();
        })
        .then(typeData => {
          const pokemonList = typeData.pokemon;
          const randomIndex = Math.floor(Math.random() * pokemonList.length);
          const pokemonUrl = pokemonList[randomIndex].pokemon.url;

          return fetch(pokemonUrl);
        })
        .then(res => res.json())
        .then(data => {
          showPokemon(data);
        })
        .catch(() => {
          display.innerHTML = `<p style="color: red; font-size: 0.8rem;">No matching Pok√©mon or type.</p>`;
        });
    });
});

searchInput.addEventListener('keydown', (event) => {
  if (event.key === 'Enter') {
    searchBtn.click();
  }
})

// Functions:

function showPokemon(data) {
        const name = data.name.charAt(0).toUpperCase() + data.name.slice(1);
        const sprite = data.sprites.other.showdown.front_default || data.sprites.front_default;
        const types = data.types.map(t => t.type.name).join(', ');
        const abilities = data.abilities
          .map((t, i) => `
            <tr>
              <td>${i + 1}</td>
              <td>${t.ability.name.charAt(0).toUpperCase() + t.ability.name.slice(1)}</td>
            </tr>
          `).join('');
          const moves = data.moves.map((m, i) => `
            <tr>
              <td>${i + 1}</td>
              <td>${m.move.name.charAt(0).toUpperCase() + m.move.name.slice(1)}</td>
            </tr>
            `).join('')
        
        document.getElementById("background-pokemon").src =
  data.sprites.other['official-artwork'].front_default || data.sprites.other['dream_world'].front_default;
  
          display.style.opacity = '0'; // Fade out
  
        setTimeout(() => {
          display.innerHTML = `
            <h3>${name}</h3>
            <img src="${sprite}" alt="${name}" />
            <p>Type: ${types}</p>
              <p style='font-size: 0.9rem; color: #ffcb05; text-align: left;'></p>
              <div class="lists">
                <table class="gameboy-table">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Ability List</th>
                    </tr>
                  </thead>
                  <tbody>
                    ${abilities}
                  </tbody>
                </table>
                <p style='font-size: 0.9rem; color: #ffcb05; text-align: left;'></p>
                <table class="gameboy-table2">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Move List</th>
                    </tr>
                  </thead>
                  <tbody>
                    ${moves}
                  </tbody>
                </table>
              </div> 
          `;
          display.style.opacity = '1'; // Fade back in
        }, 150);
      }

</script>
</body>
</html>
